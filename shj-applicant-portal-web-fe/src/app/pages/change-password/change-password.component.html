<span class="lang_swtich_login">
  <button
    class="btn btn-md border btn-light px-3 mt-4 mb-3"
    *ngIf="currentLanguage.startsWith('en')"
    (click)="setLanguage('ar-SA')"
  >
    <span>عربي</span>
</button>
<button class="btn btn-md border btn-light px-3 mt-4 mb-3" *ngIf="currentLanguage.startsWith('ar')"
        (click)="setLanguage('en-US')">
    <span>English</span>
  </button>
</span>
<div class="login__box">
  <div class="text-center">
    <img class="my-4" src="assets/images/logo.png" alt="logo"/>
  </div>
  <form (ngSubmit)="changePassword()" [formGroup]="changePasswordForm" class="login-box__wrapper">
    <h1 class="text-dcc-primary font-weight-bold mb-4">
      {{ "change-password.title" | translate }}
    </h1>

    <div class="form-group col">
      <label>{{ "change-password.old_password" | translate
        }}<span class="text-danger px-1">*</span></label
      >
      <input
        type="password"
        class="form-control"
        formControlName="oldPassword"
        [ngClass]="{
          'is-invalid': f.oldPassword.errors && f.oldPassword.touched
        }"
      />
      <div
        *ngIf="f.oldPassword.errors && f.oldPassword.touched"
        class="text-danger"
      >
        <div *ngIf="f.oldPassword.errors.required">
          {{ "general.field_validation_required" | translate }}
        </div>
        <div *ngIf="f.oldPassword.errors.minLength">
          {{
          "general.field_validation_min_length" | translate: {minLength: 8}
          }}
        </div>
        <div *ngIf="f.oldPassword.errors.maxLength">
          {{
          "general.field_validation_max_length" | translate: {maxLength: 16}
          }}
        </div>
        <div *ngIf="f.oldPassword.errors.invalid">
          {{ f.password.errors["invalid"] | translate }}
        </div>
      </div>
    </div>
    <div class="form-group col">
      <label
      >{{ "change-password.new_password" | translate
        }}<span class="text-danger px-1">*</span></label
      >
      <input
        type="password"
        class="form-control"
        formControlName="newPassword"
        required maxlength="16"
        [ngClass]="{
          'is-invalid': f.newPassword.errors && f.newPassword.touched
        }"
      />

      <div
        *ngIf="f.newPassword.errors && f.newPassword.touched"
        class="text-danger"
      >

        <div *ngIf="f.newPassword.errors.required">
          {{ "general.field_validation_required" | translate }}
        </div>
        <div *ngIf="f.newPassword.errors.minlength">
          {{
          "general.field_validation_min_length" | translate: {minLength: 8}
          }}
        </div>
        <div *ngIf="f.newPassword.errors.maxlength">
          {{
          "general.field_validation_max_length" | translate: {maxLength: 16}
          }}
        </div>
        <div *ngIf="f.newPassword.errors.invalid">
          {{ f.newPassword.errors["invalid"] | translate }}
        </div>
      </div>
    </div>
    <div class="form-group col">
      <label
      >{{ "change-password.new_password_confirm" | translate
        }}<span class="text-danger px-1">*</span></label
      >
      <input
        type="password"
        class="form-control"
        formControlName="newPasswordConfirm"
        required maxlength="16"
        [ngClass]="{
          'is-invalid':
            (f.newPasswordConfirm.errors && f.newPasswordConfirm.touched) ||
            (changePasswordForm.errors?.mismatch &&
              (f.newPasswordConfirm.dirty || f.newPasswordConfirm.touched))
        }"
      />

      <div
        *ngIf="f.newPasswordConfirm.errors && f.newPasswordConfirm.touched"
        class="text-danger"
      >
        <div *ngIf="f.newPasswordConfirm.errors.required">
          {{ "general.field_validation_required" | translate }}
        </div>
        <div *ngIf="f.newPasswordConfirm.errors.minLength">
          {{
          "general.field_validation_min_length" | translate: {minLength: 8}
          }}
        </div>
        <div *ngIf="f.newPasswordConfirm.errors.maxLength">
          {{
          "general.field_validation_max_length" | translate: {maxLength: 16}
          }}
        </div>

        <div *ngIf="f.newPasswordConfirm.errors.invalid">
          {{ f.newPasswordConfirm.errors["invalid"] | translate }}
        </div>
      </div>
      <div
        *ngIf="
            changePasswordForm?.errors?.mismatch &&
            (f.newPassword.dirty && f.newPasswordConfirm.touched) &&!f.newPasswordConfirm.errors?.required
          " class="text-danger small">
        {{"general.confirm_password_mismatch"|translate}}
      </div>
    </div>

    <div class="form-group">
      <button
        class="btn btn-dcc-primary px-4"
        type="submit"
        [disabled]="changePasswordForm.invalid || loading">
             <span
               *ngIf="loading"
               class="spinner-border spinner-border-sm mr-1"></span>

        <span>{{ "general.btn_update" | translate }}</span>
      </button>
      <div class="left-header mt-5 mb-0 pb-0">
        <a id="otpBackLogin" class="d-block" (click)="goBack()" href="javascript:void(0);">
          <svg-icon styleClass="flip" icon="arrow-right"></svg-icon>
          <span class="mx-2 px-1">{{'general.btn_back' | translate}}</span>
        </a>
      </div>
    </div>
  </form>
</div>
